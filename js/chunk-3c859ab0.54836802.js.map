{"version":3,"sources":["webpack:///./src/contracts/contractOtcV1.js","webpack:///./src/views/otcTransactionOld/components/OrderBox.vue?a021","webpack:///./src/views/otcTransactionOld/OtcTransaction.vue?e0b1","webpack:///./src/views/otcTransactionOld/OtcTransaction.vue?9796","webpack:///./src/views/otcTransactionOld/components/OrderBox.vue?1336","webpack:///./src/views/otcTransactionOld/components/HangBuy.vue?68d0","webpack:///src/views/otcTransactionOld/components/HangBuy.vue","webpack:///./src/views/otcTransactionOld/components/HangBuy.vue?afa2","webpack:///./src/views/otcTransactionOld/components/HangBuy.vue","webpack:///./src/views/otcTransactionOld/components/HangSale.vue?c571","webpack:///src/views/otcTransactionOld/components/HangSale.vue","webpack:///./src/views/otcTransactionOld/components/HangSale.vue?8499","webpack:///./src/views/otcTransactionOld/components/HangSale.vue","webpack:///./src/views/otcTransactionOld/components/OrderPiceTotal.vue?cf86","webpack:///./src/views/otcTransactionOld/components/OrderPriceList.vue?5fac","webpack:///./src/views/otcTransactionOld/components/OrderPriceInfo.vue?7e16","webpack:///src/views/otcTransactionOld/components/OrderPriceInfo.vue","webpack:///./src/views/otcTransactionOld/components/OrderPriceInfo.vue?d903","webpack:///./src/views/otcTransactionOld/components/OrderPriceInfo.vue","webpack:///src/views/otcTransactionOld/components/OrderPriceList.vue","webpack:///./src/views/otcTransactionOld/components/OrderPriceList.vue?2407","webpack:///./src/views/otcTransactionOld/components/OrderPriceList.vue","webpack:///./src/views/otcTransactionOld/components/TradePop.vue?e342","webpack:///src/views/otcTransaction/components/TradePop.vue","webpack:///./src/views/otcTransactionOld/components/TradePop.vue?e7ba","webpack:///./src/views/otcTransactionOld/components/TradePop.vue","webpack:///src/views/otcTransactionOld/components/OrderPiceTotal.vue","webpack:///./src/views/otcTransactionOld/components/OrderPiceTotal.vue?14ad","webpack:///./src/views/otcTransactionOld/components/OrderPiceTotal.vue","webpack:///src/views/otcTransactionOld/components/OrderBox.vue","webpack:///./src/views/otcTransactionOld/components/OrderBox.vue?72af","webpack:///./src/views/otcTransactionOld/components/OrderBox.vue","webpack:///src/views/otcTransactionOld/OtcTransaction.vue","webpack:///./src/views/otcTransactionOld/OtcTransaction.vue?b833","webpack:///./src/views/otcTransactionOld/OtcTransaction.vue","webpack:///./src/views/otcTransactionOld/components/OrderPriceInfo.vue?0ea5","webpack:///./src/views/otcTransactionOld/components/OrderPiceTotal.vue?197b","webpack:///./src/views/otcTransactionOld/components/OrderPriceList.vue?a2d1"],"names":["contractAddress","config","otcV1","contractInstance","web3Obj","web3","eth","Contract","contractAbi","MAI","methods","call","resp","successResult","failResult","MUSD","MIN_AMOUNT","fromWei","MIN_REMAIN_AMOUNT","lastPrice","balance","getMarketPrices","direct","offset","size","getPriceTotals","price","toWei","getMarketIds","console","log","getOrderInfo","id","pending","amount","send","from","store","state","myAcount","batchTrade","ids","trade","getPendingIds","account","cancel","render","_vm","this","_h","$createElement","_c","_self","staticClass","_v","_s","$t","on","$event","$gbUtils","handleToPage","attrs","staticRenderFns","type","handleShowHang","_l","item","index","key","ref","refInFor","priceList","length","_e","hangPopShow","staticStyle","handleClose","model","value","callback","$$v","show","expression","formatterNum","scopedSlots","_u","fn","handleMax","proxy","formatBalance","num","minAmount","needAll","hangLoading","handlePending","approveLoading","approve","name","props","data","tokenAddress","auth","computed","init","getMinAmount","contractOtc","gettokenAddress","getBalance","getAllowance","contractToken","mounted","component","totalAmount","handleCheck","handleTrade","curId","curType","curInfo","tradeShow","close","batchId","handleHideItem","batchLoading","handleBatchTrade","orderInfo","remain","total","token","sender","status","components","OrderPriceInfo","idList","getIdList","info","$set","num1","canTradeNum","num2","tradeLoading","canBuyMai","OrderPriceList","TradePop","priceListShow","timer","watch","val","initTimer","beforeDestroy","clearInterval","HangBuy","HangSale","OrderPiceTotal","getList","tempList","OrderBox","getLastPrice"],"mappings":"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","file":"js/chunk-3c859ab0.54836802.js","sourcesContent":["import config from '@/config/app.config.js' // 引入配置文件\nimport contractAbi from '../abi/OTCV1.json' // 分发合约\nimport web3Obj from '../utils/web3'\nimport store from '@/store'\n\nconst contractAddress = config.otcV1\nconst contractInstance = new web3Obj.web3.eth.Contract(contractAbi, contractAddress)\n\n/**\n * 獲取mai地址\n */\nconst MAI = async () => {\n  try {\n    const resp = await contractInstance.methods\n      .MAI()\n      .call({})\n    return web3Obj.successResult(resp)\n  } catch (error) {\n    return web3Obj.failResult(error)\n  }\n}\n\n/**\n * 獲取musd地址\n */\nconst MUSD = async () => {\n  try {\n    const resp = await contractInstance.methods\n      .MUSD()\n      .call({})\n    return web3Obj.successResult(resp)\n  } catch (error) {\n    return web3Obj.failResult(error)\n  }\n}\n/**\n * 獲取最小掛單值\n * @returns\n */\nconst MIN_AMOUNT = async () => {\n  try {\n    const resp = await contractInstance.methods\n      .MIN_AMOUNT()\n      .call({})\n    return web3Obj.successResult(web3Obj.fromWei(resp))\n  } catch (error) {\n    return web3Obj.failResult(error)\n  }\n}\n\n/**\n * 獲取最小吃單剩餘值\n * MIN_REMAIN_AMOUNT\n */\nconst MIN_REMAIN_AMOUNT = async () => {\n  try {\n    const resp = await contractInstance.methods\n      .MIN_REMAIN_AMOUNT()\n      .call({})\n    return web3Obj.successResult(web3Obj.fromWei(resp))\n  } catch (error) {\n    return web3Obj.failResult(error)\n  }\n}\n\n/**\n * 獲取價格\n * @return amount\n */\nconst lastPrice = async () => {\n  try {\n    var balance = await contractInstance.methods\n      .lastPrice()\n      .call({})\n    balance = web3Obj.fromWei(balance)\n    return web3Obj.successResult(balance)\n  } catch (error) {\n    return web3Obj.failResult(error)\n  }\n}\n\n/**\n * 获取市场价格列表\n * @param {uint256} direct direct-挂单方向：1买; 2-卖\n * @param {uint256} offset 偏移量；\n * @param {uint256} size：每页显示条数\n * @returns []\n */\nconst getMarketPrices = async (direct, offset, size) => {\n  try {\n    const resp = await contractInstance.methods\n      .getMarketPrices(direct)\n      .call({})\n    return web3Obj.successResult(resp)\n  } catch (error) {\n    return web3Obj.failResult(error)\n  }\n}\n\n/**\n * @param {*} direct 挂单方向：1买; 2-卖\n * @param {*} price 价格\n * @returns 总量\n */\nconst getPriceTotals = async (direct, price) => {\n  try {\n    const resp = await contractInstance.methods\n      .getPriceTotals(direct, web3Obj.toWei(price))\n      .call({})\n    return web3Obj.successResult(web3Obj.fromWei(resp))\n  } catch (error) {\n    return web3Obj.failResult(error)\n  }\n}\n\nconst getMarketIds = async (direct, price) => {\n  try {\n    const resp = await contractInstance.methods\n      .getMarketIds(direct, web3Obj.toWei(price))\n      .call({})\n    return web3Obj.successResult(resp)\n  } catch (error) {\n    console.log(error)\n    return web3Obj.failResult(error)\n  }\n}\n\n/**\n * 9、查询挂单详情---getOrderInfo(uint256 _index)\nstruct Order {\n        uint256 direct; // 方向：1买; 2-卖\n        uint256 price; // 价格\n        uint256 total; // 挂单总数\n        uint256 remain; // 剩余数量\n        address token; // 支付币种\n        address sender; // 挂单人\n        uint256 status; // 状态：0-挂单中；1-已完成; 2-已撤单\n    }\n */\nconst getOrderInfo = async (id) => {\n  try {\n    const resp = await contractInstance.methods\n      .getOrderInfo(id)\n      .call({})\n    return web3Obj.successResult(resp)\n  } catch (error) {\n    console.log(error)\n    return web3Obj.failResult(error)\n  }\n}\n/**\n * 2、挂单--------pending(uint256 direct, uint256 price, uint256 amount)\n  参数说明：direct-挂单方向：1买; 2-卖； price-挂单价格； amount-挂单数量\n */\nconst pending = async (direct, price, amount) => {\n  try {\n    const resp = await contractInstance.methods\n      .pending(direct, web3Obj.toWei(price), web3Obj.toWei(amount))\n      .send({ from: store.state.myAcount })\n    return web3Obj.successResult(resp)\n  } catch (error) {\n    return web3Obj.failResult(error)\n  }\n}\n/**\n * batchTrade\n * 批量吃單\n */\nconst batchTrade = async (ids) => {\n  try {\n    const resp = await contractInstance.methods\n      .batchTrade(ids)\n      .send({ from: store.state.myAcount })\n    return web3Obj.successResult(resp)\n  } catch (error) {\n    return web3Obj.failResult(error)\n  }\n}\n\n/**\n * trade\n * 吃單\n */\nconst trade = async (id, amount) => {\n  try {\n    const resp = await contractInstance.methods\n      .trade(id, web3Obj.toWei(amount))\n      .send({ from: store.state.myAcount })\n    return web3Obj.successResult(resp)\n  } catch (error) {\n    return web3Obj.failResult(error)\n  }\n}\n\n/**\n * 8、查看用户挂单下标列表---getPendingIds(address _addr, uint256 offset, uint256 size)\n */\nconst getPendingIds = async (account) => {\n  try {\n    const resp = await contractInstance.methods\n      .getPendingIds(account || store.state.myAcount)\n      .call({ })\n    return web3Obj.successResult(resp)\n  } catch (error) {\n    return web3Obj.failResult(error)\n  }\n}\n\n/**\n * 撤單\n * 4、取消--------cancel(uint256 _index)\n * 参数说明：index-下标ID\n */\nconst cancel = async (id) => {\n  try {\n    const resp = await contractInstance.methods\n      .cancel(id)\n      .send({ from: store.state.myAcount })\n    return web3Obj.successResult(resp)\n  } catch (error) {\n    return web3Obj.failResult(error)\n  }\n}\n\nexport default {\n  MAI,\n  MUSD,\n  MIN_AMOUNT,\n  MIN_REMAIN_AMOUNT,\n  lastPrice,\n  getMarketPrices,\n  getPriceTotals,\n  getMarketIds,\n  getOrderInfo,\n  pending,\n  batchTrade,\n  trade,\n  getPendingIds,\n  cancel\n}\n","export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../../../node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./OrderBox.vue?vue&type=style&index=0&id=6a574c80&scoped=true&lang=scss&\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./OtcTransaction.vue?vue&type=style&index=0&id=1d811b92&scoped=true&lang=scss&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"otc-page\"},[_c('div',{staticClass:\"otc-title\"},[_c('div',{staticClass:\"left\"},[_vm._v(_vm._s(_vm.$t('otc.title'))+\" (Old)\")]),_c('div',{staticClass:\"right\",on:{\"click\":function($event){return _vm.$gbUtils.handleToPage('/myHangOrderV1')}}},[_c('span',[_vm._v(_vm._s(_vm.$t('otc.myOrder')))]),_c('van-icon',{attrs:{\"name\":\"arrow\"}})],1)]),_c('div',{staticClass:\"last-price\"},[_c('div',{staticClass:\"price-box\"},[_c('span',[_vm._v(_vm._s(_vm.lastPrice))]),_c('span',[_vm._v(\"MUSD/MAI\")])]),_c('div',{staticClass:\"ptice-tips\"},[_vm._v(_vm._s(_vm.$t('otc.lastPrice')))])]),_c('OrderBox',{attrs:{\"type\":2,\"lastPrice\":_vm.lastPrice || 0}}),_c('OrderBox',{attrs:{\"type\":1,\"lastPrice\":_vm.lastPrice || 0}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"order-box\"},[_c('div',{staticClass:\"order-tilte\"},[_c('div',{staticClass:\"left\"},[_vm._v(_vm._s(_vm.type === 1 ? _vm.$t('otc.buyOrder') : _vm.$t('otc.soldOrder')))]),_c('van-button',{staticClass:\"btn\",attrs:{\"disabled\":\"\"},on:{\"click\":_vm.handleShowHang}},[_vm._v(_vm._s(_vm.type === 1 ? _vm.$t('otc.hangBuy') : _vm.$t('otc.hangSale')))])],1),_c('div',{staticClass:\"order-list\"},[_c('div',{staticClass:\"list-tab\"},[_c('div',{staticClass:\"tab\"},[_vm._v(_vm._s(_vm.$t('otc.price'))+\"(MU)\")]),_c('div',{staticClass:\"tab\"},[_vm._v(_vm._s(_vm.$t('otc.total'))+\"(MAI)\")])]),_c('div',{staticClass:\"list-box\"},[_vm._l((_vm.priceList),function(item,index){return _c('OrderPiceTotal',{key:index,ref:\"OrderPiceTotal\",refInFor:true,attrs:{\"price\":item,\"type\":_vm.type}})}),(!_vm.priceList.length)?_c('van-empty'):_vm._e()],2)]),(_vm.type === 1 && _vm.hangPopShow)?_c('HangBuy',{attrs:{\"lastPrice\":_vm.lastPrice},on:{\"close\":_vm.handleShowHang}}):_vm._e(),(_vm.type === 2 && _vm.hangPopShow)?_c('HangSale',{attrs:{\"lastPrice\":_vm.lastPrice},on:{\"close\":_vm.handleShowHang}}):_vm._e()],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('VanPopup',{staticClass:\"otc-pop\",staticStyle:{\"background\":\"transparent\",\"width\":\"80%\",\"max-width\":\"375px\",\"min-width\":\"300px\"},on:{\"click-overlay\":_vm.handleClose},model:{value:(_vm.show),callback:function ($$v) {_vm.show=$$v},expression:\"show\"}},[_c('div',{staticClass:\"pop-body\"},[_c('div',{staticClass:\"pop-title\"},[_vm._v(_vm._s(_vm.$t('otc.hangBuy')))]),_c('van-field',{staticClass:\"pop-input\",attrs:{\"input-align\":\"right\",\"type\":\"number\",\"formatter\":_vm.formatterNum,\"label\":_vm.$t('otc.price'),\"placeholder\":_vm.$t('otc.nowPrice', {price: _vm.lastPrice})},model:{value:(_vm.price),callback:function ($$v) {_vm.price=$$v},expression:\"price\"}}),_c('van-field',{staticClass:\"pop-input\",attrs:{\"input-align\":\"right\",\"type\":\"number\",\"label\":_vm.$t('otc.hangAmount'),\"placeholder\":_vm.$t('otc.pleaseInput')},scopedSlots:_vm._u([{key:\"button\",fn:function(){return [_c('van-button',{staticClass:\"max-btn\",attrs:{\"size\":\"small\",\"color\":\"#5E12E7\",\"disabled\":!_vm.price},on:{\"click\":_vm.handleMax}},[_vm._v(\"Max\")])]},proxy:true}]),model:{value:(_vm.amount),callback:function ($$v) {_vm.amount=$$v},expression:\"amount\"}}),_c('div',{staticClass:\"pop-balance\"},[_vm._v(\"MUSD: \"+_vm._s(_vm.$gbUtils.formatBalance(_vm.balance)))]),_c('div',{staticClass:\"pop-tips\"},[_vm._v(_vm._s(_vm.$t('otc.hangBuyTip', {num: _vm.minAmount})))]),_c('div',{staticClass:\"pop-tips\"},[_vm._v(_vm._s(_vm.$t('otc.estimatedConsumption', {num: _vm.needAll})))]),(_vm.auth)?_c('van-button',{staticClass:\"pop-btn\",attrs:{\"loading\":_vm.hangLoading,\"disabled\":_vm.price <= 0 || +_vm.amount < +_vm.minAmount || _vm.needAll > +_vm.balance},on:{\"click\":_vm.handlePending}},[_vm._v(_vm._s(_vm.$t('otc.submitHang')))]):_c('van-button',{staticClass:\"pop-btn\",attrs:{\"loading\":_vm.approveLoading},on:{\"click\":_vm.approve}},[_vm._v(_vm._s(_vm.$t('otc.approve')))])],1),_c('div',{staticClass:\"close-icon\",on:{\"click\":_vm.handleClose}},[_c('img',{attrs:{\"src\":require(\"@/assets/close.png\")}})])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n   <VanPopup v-model=\"show\"\n    style=\"background: transparent; width:80%; max-width: 375px; min-width: 300px;\"\n    class=\"otc-pop\"\n    @click-overlay=\"handleClose\">\n    <div class=\"pop-body\">\n      <div class=\"pop-title\">{{ $t('otc.hangBuy') }}</div>\n      <van-field\n      class=\"pop-input\"\n      input-align=\"right\"\n      type=\"number\"\n      v-model=\"price\"\n      :formatter=\"formatterNum\"\n      :label=\"$t('otc.price')\"\n      :placeholder=\"$t('otc.nowPrice', {price: lastPrice})\" />\n      <van-field\n      class=\"pop-input\"\n      input-align=\"right\"\n      type=\"number\"\n      v-model=\"amount\"\n      :label=\"$t('otc.hangAmount')\"\n      :placeholder=\"$t('otc.pleaseInput')\">\n      <template #button>\n        <van-button class=\"max-btn\" size=\"small\" color=\"#5E12E7\"\n        :disabled=\"!price\"\n        @click=\"handleMax\"\n        >Max</van-button>\n      </template>\n    </van-field>\n      <div class=\"pop-balance\">MUSD: {{ $gbUtils.formatBalance(balance) }}</div>\n      <div class=\"pop-tips\">{{ $t('otc.hangBuyTip', {num: minAmount}) }}</div>\n      <div class=\"pop-tips\">{{ $t('otc.estimatedConsumption', {num: needAll}) }}</div>\n      <van-button class=\"pop-btn\"\n      v-if=\"auth\"\n      :loading=\"hangLoading\"\n      :disabled=\"price <= 0 || +amount < +minAmount || needAll > +balance\"\n      @click=\"handlePending\"\n      >{{ $t('otc.submitHang') }}</van-button>\n      <van-button class=\"pop-btn\"\n      v-else\n      :loading=\"approveLoading\"\n      @click=\"approve\"\n      >{{ $t('otc.approve') }}</van-button>\n    </div>\n    <div class=\"close-icon\" @click=\"handleClose\">\n      <img src=\"@/assets/close.png\"/>\n    </div>\n</VanPopup>\n</template>\n\n<script>\nimport contractOtc from '../../../contracts/contractOtcV1'\nimport contractToken from '../../../contracts/contractToken'\nimport config from '@/config/app.config.js' // 引入配置文件\n\nexport default {\n  name: '',\n  props: ['lastPrice'],\n  data () {\n    return {\n      show: true,\n      type: 1, // 1 买 2 卖\n      price: '',\n      amount: '',\n      tokenAddress: '',\n      hangLoading: false,\n      balance: 0,\n      minAmount: 0,\n      auth: false,\n      approveLoading: true\n    }\n  },\n  computed: {\n    needAll () {\n      return (this.price * this.amount) || 0\n    }\n  },\n  methods: {\n    formatterNum (value) {\n      return value.replace(/[^0-9.]/g, '').replace(/^(-)*(\\d+)\\.(\\d\\d).*$/, '$1$2.$3')\n    },\n    handleClose () {\n      this.$emit('close')\n    },\n    async init () {\n      this.getMinAmount()\n      await this.gettokenAddress()\n      this.getBalance()\n      this.getAllowance()\n    },\n    async getMinAmount () {\n      const resp = await contractOtc.MIN_AMOUNT()\n      if (!resp.success) return\n      this.minAmount = resp.result || 0\n    },\n    async gettokenAddress () {\n      const resp = await contractOtc.MUSD()\n      if (!resp.success) return\n      this.tokenAddress = resp.result\n    },\n    async getBalance () {\n      if (!this.tokenAddress) return\n      const resp = await this.$web3.balanceOf(this.tokenAddress)\n      if (!resp.success) return\n      this.balance = resp.result || 0\n    },\n    handleMax () {\n      this.amount = this.balance / this.price\n    },\n    // 获取授权额度\n    async getAllowance () {\n      // 获取授权额度\n      this.approveLoading = true\n      const resp = await contractToken.allowance(\n        this.tokenAddress,\n        config.otcV1 // 合约地址\n      )\n      this.approveLoading = false\n      if (!resp.success) return\n      this.auth = resp.result > 0\n    },\n    // 授权\n    async approve () {\n      this.approveLoading = true\n      const resp = await contractToken.approve(\n        this.tokenAddress,\n        config.otcV1 // 合约地址\n      )\n      this.approveLoading = false\n      if (!resp.success) return this.$toast('fail')\n      this.$toast('Success')\n      this.auth = true\n    },\n    // 掛單\n    async handlePending () {\n      this.hangLoading = true\n      const resp = await contractOtc.pending(this.type, this.price, this.amount)\n      this.hangLoading = false\n      if (!resp.success) return\n      this.$emit('close')\n      this.$parent.init()\n    }\n  },\n  mounted () {\n    this.init()\n  }\n}\n</script>\n\n<style scoped lang=\"scss\">\n\n</style>\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./HangBuy.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./HangBuy.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./HangBuy.vue?vue&type=template&id=775bcb90&scoped=true&\"\nimport script from \"./HangBuy.vue?vue&type=script&lang=js&\"\nexport * from \"./HangBuy.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"775bcb90\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('VanPopup',{staticClass:\"otc-pop\",staticStyle:{\"background\":\"transparent\",\"width\":\"80%\",\"max-width\":\"375px\",\"min-width\":\"300px\"},on:{\"click-overlay\":_vm.handleClose},model:{value:(_vm.show),callback:function ($$v) {_vm.show=$$v},expression:\"show\"}},[_c('div',{staticClass:\"pop-body\"},[_c('div',{staticClass:\"pop-title\"},[_vm._v(_vm._s(_vm.$t('otc.hangSale')))]),_c('van-field',{staticClass:\"pop-input\",attrs:{\"input-align\":\"right\",\"type\":\"number\",\"formatter\":_vm.formatterNum,\"label\":_vm.$t('otc.price'),\"placeholder\":_vm.$t('otc.nowPrice', {price: _vm.lastPrice})},model:{value:(_vm.price),callback:function ($$v) {_vm.price=$$v},expression:\"price\"}}),_c('van-field',{staticClass:\"pop-input\",attrs:{\"input-align\":\"right\",\"type\":\"number\",\"label\":_vm.$t('otc.hangAmount'),\"placeholder\":_vm.$t('otc.pleaseInput')},scopedSlots:_vm._u([{key:\"button\",fn:function(){return [_c('van-button',{staticClass:\"max-btn\",attrs:{\"size\":\"small\",\"color\":\"#5E12E7\",\"disabled\":!_vm.price},on:{\"click\":_vm.handleMax}},[_vm._v(\"Max\")])]},proxy:true}]),model:{value:(_vm.amount),callback:function ($$v) {_vm.amount=$$v},expression:\"amount\"}}),_c('div',{staticClass:\"pop-balance\"},[_vm._v(\"MAI: \"+_vm._s(_vm.$gbUtils.formatBalance(_vm.balance)))]),_c('div',{staticClass:\"pop-tips\"},[_vm._v(_vm._s(_vm.$t('otc.hangBuyTip', {num: _vm.minAmount})))]),_c('div',{staticClass:\"pop-tips\"},[_vm._v(\" \"+_vm._s(_vm.$t('otc.expectedToObtain', {num: _vm.needAll})))]),(_vm.auth)?_c('van-button',{staticClass:\"pop-btn\",attrs:{\"loading\":_vm.hangLoading,\"disabled\":_vm.price <= 0 ||  _vm.amount < +_vm.minAmount || _vm.amount > +_vm.balance},on:{\"click\":_vm.handlePending}},[_vm._v(_vm._s(_vm.$t('otc.submitHang')))]):_c('van-button',{staticClass:\"pop-btn\",attrs:{\"loading\":_vm.approveLoading},on:{\"click\":_vm.approve}},[_vm._v(_vm._s(_vm.$t('otc.approve')))])],1),_c('div',{staticClass:\"close-icon\",on:{\"click\":_vm.handleClose}},[_c('img',{attrs:{\"src\":require(\"@/assets/close.png\")}})])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <VanPopup v-model=\"show\"\n   style=\"background: transparent; width:80%; max-width: 375px; min-width: 300px;\"\n   class=\"otc-pop\"\n   @click-overlay=\"handleClose\">\n   <div class=\"pop-body\">\n     <div class=\"pop-title\">{{ $t('otc.hangSale') }}</div>\n     <van-field\n     class=\"pop-input\"\n     input-align=\"right\"\n     type=\"number\"\n     v-model=\"price\"\n     :formatter=\"formatterNum\"\n     :label=\"$t('otc.price')\"\n     :placeholder=\"$t('otc.nowPrice', {price: lastPrice})\" />\n     <van-field\n     class=\"pop-input\"\n     input-align=\"right\"\n     type=\"number\"\n     v-model=\"amount\"\n     :label=\"$t('otc.hangAmount')\"\n     :placeholder=\"$t('otc.pleaseInput')\">\n     <template #button>\n       <van-button class=\"max-btn\" size=\"small\" color=\"#5E12E7\"\n       :disabled=\"!price\"\n       @click=\"handleMax\"\n       >Max</van-button>\n     </template>\n   </van-field>\n     <div class=\"pop-balance\">MAI: {{ $gbUtils.formatBalance(balance) }}</div>\n     <div class=\"pop-tips\">{{ $t('otc.hangBuyTip', {num: minAmount}) }}</div>\n     <div class=\"pop-tips\"> {{ $t('otc.expectedToObtain', {num: needAll}) }}</div>\n     <van-button class=\"pop-btn\"\n     v-if=\"auth\"\n     :loading=\"hangLoading\"\n     :disabled=\"price <= 0 ||  amount < +minAmount || amount > +balance\"\n     @click=\"handlePending\"\n     >{{ $t('otc.submitHang') }}</van-button>\n     <van-button class=\"pop-btn\"\n     v-else\n     :loading=\"approveLoading\"\n     @click=\"approve\"\n     >{{ $t('otc.approve') }}</van-button>\n   </div>\n   <div class=\"close-icon\" @click=\"handleClose\">\n     <img src=\"@/assets/close.png\"/>\n   </div>\n</VanPopup>\n</template>\n\n<script>\nimport contractOtc from '../../../contracts/contractOtcV1'\nimport contractToken from '../../../contracts/contractToken'\nimport config from '@/config/app.config.js' // 引入配置文件\n\nexport default {\n  name: '',\n  props: ['lastPrice'],\n  data () {\n    return {\n      show: true,\n      type: 2, // 1 买 2 卖\n      price: '',\n      amount: '',\n      tokenAddress: '',\n      hangLoading: false,\n      balance: 0,\n      minAmount: 0,\n      auth: false,\n      approveLoading: true\n    }\n  },\n  computed: {\n    needAll () {\n      return (this.price * this.amount) || 0\n    }\n  },\n  methods: {\n    formatterNum (value) {\n      return value.replace(/[^0-9.]/g, '').replace(/^(-)*(\\d+)\\.(\\d\\d).*$/, '$1$2.$3')\n    },\n    handleClose () {\n      this.$emit('close')\n    },\n    async init () {\n      this.getMinAmount()\n      await this.gettokenAddress()\n      this.getBalance()\n      this.getAllowance()\n    },\n    async getMinAmount () {\n      const resp = await contractOtc.MIN_AMOUNT()\n      if (!resp.success) return\n      this.minAmount = resp.result || 0\n    },\n    async gettokenAddress () {\n      const resp = await contractOtc.MAI()\n      if (!resp.success) return\n      this.tokenAddress = resp.result\n    },\n    async getBalance () {\n      if (!this.tokenAddress) return\n      const resp = await this.$web3.balanceOf(this.tokenAddress)\n      if (!resp.success) return\n      this.balance = resp.result || 0\n    },\n    handleMax () {\n      this.amount = this.balance\n    },\n    // 获取授权额度\n    async getAllowance () {\n      // 获取授权额度\n      this.approveLoading = true\n      const resp = await contractToken.allowance(\n        this.tokenAddress,\n        config.otcV1 // 合约地址\n      )\n      this.approveLoading = false\n      if (!resp.success) return\n      this.auth = resp.result > 0\n    },\n    // 授权\n    async approve () {\n      this.approveLoading = true\n      const resp = await contractToken.approve(\n        this.tokenAddress,\n        config.otcV1 // 合约地址\n      )\n      this.approveLoading = false\n      if (!resp.success) return this.$toast('fail')\n      this.$toast('Success')\n      this.auth = true\n    },\n    // 掛單\n    async handlePending () {\n      this.hangLoading = true\n      const resp = await contractOtc.pending(this.type, this.price, this.amount)\n      this.hangLoading = false\n      if (!resp.success) return\n      this.$emit('close')\n      this.$parent.init()\n    }\n  },\n  mounted () {\n    this.init()\n  }\n}\n</script>\n\n<style scoped lang=\"scss\">\n\n</style>\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./HangSale.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./HangSale.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./HangSale.vue?vue&type=template&id=1e7bc59a&scoped=true&\"\nimport script from \"./HangSale.vue?vue&type=script&lang=js&\"\nexport * from \"./HangSale.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"1e7bc59a\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"total-box\"},[_c('div',{staticClass:\"order-item\"},[_vm._v(_vm._s(_vm.price))]),_c('div',{staticClass:\"order-item\"},[_vm._v(_vm._s(_vm.$gbUtils.formatBalance(_vm.totalAmount)))]),_c('div',{staticClass:\"order-item\"},[_c('van-button',{staticClass:\"check-item\",attrs:{\"disabled\":\"\"},on:{\"click\":_vm.handleCheck}},[_vm._v(_vm._s(_vm.type === 1 ? _vm.$t('otc.sell') : _vm.$t('otc.purchase')))])],1),(_vm.priceListShow)?_c('OrderPriceList',{attrs:{\"price\":_vm.price,\"type\":_vm.type},on:{\"close\":_vm.handleCheck,\"handleTrade\":_vm.handleTrade}}):_vm._e(),(_vm.tradeShow)?_c('TradePop',{attrs:{\"id\":_vm.curId,\"type\":_vm.curType,\"orderInfo\":_vm.curInfo},on:{\"close\":function () {_vm.tradeShow = false}}}):_vm._e()],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('VanPopup',{staticClass:\"otc-pop\",staticStyle:{\"background\":\"transparent\",\"width\":\"80%\",\"max-width\":\"375px\",\"min-width\":\"300px\"},on:{\"click-overlay\":_vm.close},model:{value:(_vm.show),callback:function ($$v) {_vm.show=$$v},expression:\"show\"}},[_c('div',{staticClass:\"pop-body\"},[_c('div',{staticClass:\"pop-title\"},[_vm._v(_vm._s(_vm.price)+\" \"+_vm._s(_vm.type === 1 ? _vm.$t('otc.buy') : _vm.$t('otc.sale')))]),_c('van-checkbox-group',{model:{value:(_vm.batchId),callback:function ($$v) {_vm.batchId=$$v},expression:\"batchId\"}},_vm._l((_vm.idList),function(item,index){return _c('van-checkbox',{key:item,staticClass:\"check-box\",attrs:{\"checked-color\":\"#6667FF\",\"name\":item}},[_c('OrderPriceInfo',{attrs:{\"index\":index,\"id\":item,\"price\":_vm.price,\"type\":_vm.type},on:{\"handleTrade\":_vm.handleTrade,\"handleHideItem\":_vm.handleHideItem}})],1)}),1),(_vm.auth)?_c('van-button',{staticClass:\"pop-btn\",attrs:{\"disabled\":!_vm.batchId.length,\"loading\":_vm.batchLoading},on:{\"click\":_vm.handleBatchTrade}},[_vm._v(_vm._s(_vm.type === 1 ? _vm.$t('otc.batchSell') : _vm.$t('otc.batchBuy')))]):_c('van-button',{staticClass:\"pop-btn\",attrs:{\"loading\":_vm.approveLoading},on:{\"click\":_vm.approve}},[_vm._v(_vm._s(_vm.$t('otc.approve')))])],1),_c('div',{staticClass:\"close-icon\",on:{\"click\":_vm.close}},[_c('img',{attrs:{\"src\":require(\"@/assets/close.png\")}})])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"flex-box\"},[_c('div',{staticClass:\"amount\"},[_vm._v(_vm._s(_vm.$gbUtils.formatBalance(_vm.orderInfo.remain || 0))+\" MAI\")]),_c('VanButton',{staticClass:\"pop-btn\",on:{\"click\":_vm.handleTrade}},[_vm._v(_vm._s(_vm.type === 2 ? _vm.$t('otc.purchase') : _vm.$t('otc.sell')))])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n    <div class=\"flex-box\">\n      <div class=\"amount\">{{ $gbUtils.formatBalance(orderInfo.remain || 0) }} MAI</div>\n      <VanButton class=\"pop-btn\" @click=\"handleTrade\">{{ type === 2 ? $t('otc.purchase') : $t('otc.sell')}}</VanButton>\n    </div>\n</template>\n\n<script>\nimport contractOtc from '../../../contracts/contractOtcV1'\n\nexport default {\n  name: '',\n  props: ['id', 'price', 'type', 'index'],\n  data () {\n    return {\n      orderInfo: {}\n    }\n  },\n  methods: {\n    async getOrderInfo () {\n      const resp = await contractOtc.getOrderInfo(this.id)\n      if (!resp.success) return\n      this.orderInfo = {\n        direct: resp.result.direct,\n        price: this.$web3.fromWei(resp.result.price),\n        total: this.$web3.fromWei(resp.result.total),\n        remain: this.$web3.fromWei(resp.result.remain),\n        token: resp.result.token,\n        sender: resp.result.sender,\n        status: resp.result.status\n      }\n      if (this.orderInfo.remain <= 0) {\n        this.$emit('handleHideItem', this.index)\n      }\n    },\n    handleTrade () {\n      this.$emit('handleTrade', this.type, this.id, this.orderInfo)\n    }\n  },\n  mounted () {\n    this.getOrderInfo()\n  }\n}\n</script>\n\n<style scoped lang=\"scss\">\n.flex-box {\n  width: 100%;\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  .amount {\n  }\n  .pop-btn {\n    width: auto;\n    height: 24px;\n    margin-top: 0;\n    background: #6667FF;\n  }\n}\n</style>\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./OrderPriceInfo.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./OrderPriceInfo.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./OrderPriceInfo.vue?vue&type=template&id=21fa6f1e&scoped=true&\"\nimport script from \"./OrderPriceInfo.vue?vue&type=script&lang=js&\"\nexport * from \"./OrderPriceInfo.vue?vue&type=script&lang=js&\"\nimport style0 from \"./OrderPriceInfo.vue?vue&type=style&index=0&id=21fa6f1e&scoped=true&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"21fa6f1e\",\n  null\n  \n)\n\nexport default component.exports","<template>\n  <VanPopup v-model=\"show\" style=\"background: transparent; width:80%; max-width: 375px; min-width: 300px;\" class=\"otc-pop\"\n    @click-overlay=\"close\">\n    <div class=\"pop-body\">\n      <div class=\"pop-title\">{{ price }} {{ type === 1 ? $t('otc.buy') : $t('otc.sale') }}</div>\n      <van-checkbox-group v-model=\"batchId\">\n        <van-checkbox class=\"check-box\"\n        checked-color=\"#6667FF\"\n        v-for=\"(item, index) in idList\" :key=\"item\"\n        :name=\"item\"\n        >\n        <OrderPriceInfo :index=\"index\" :id=\"item\" :price=\"price\" :type=\"type\" @handleTrade=\"handleTrade\" @handleHideItem=\"handleHideItem\"/>\n      </van-checkbox>\n      </van-checkbox-group>\n      <van-button class=\"pop-btn\"\n      v-if=\"auth\"\n      :disabled=\"!batchId.length\"\n      :loading=\"batchLoading\"\n      @click=\"handleBatchTrade\"\n      >{{type === 1 ? $t('otc.batchSell') : $t('otc.batchBuy')}}</van-button>\n      <van-button class=\"pop-btn\"\n     v-else\n     :loading=\"approveLoading\"\n     @click=\"approve\"\n     >{{ $t('otc.approve') }}</van-button>\n    </div>\n    <div class=\"close-icon\" @click=\"close\">\n      <img src=\"@/assets/close.png\" />\n    </div>\n  </VanPopup>\n</template>\n\n<script>\nimport contractOtc from '../../../contracts/contractOtcV1'\nimport contractToken from '../../../contracts/contractToken'\nimport OrderPriceInfo from './OrderPriceInfo.vue'\nimport config from '@/config/app.config.js' // 引入配置文件\nexport default {\n  name: '',\n  props: ['price', 'type'],\n  components: { OrderPriceInfo },\n  data () {\n    return {\n      show: true,\n      idList: [],\n      batchId: [],\n      batchLoading: false,\n      tokenAddress: '',\n      auth: false,\n      approveLoading: true\n    }\n  },\n  methods: {\n    close () {\n      this.$emit('close')\n    },\n    async init () {\n      this.getIdList()\n      await this.gettokenAddress()\n      this.getAllowance()\n    },\n    handleHideItem (index) {\n      this.idList.splice(index, 1)\n    },\n    async getIdList () {\n      const resp = await contractOtc.getMarketIds(this.type, this.price)\n      if (!resp.success) return\n      this.idList = (resp.result || []).map(item => {\n        return item\n      })\n    },\n    async gettokenAddress () {\n      // type 1买单  卖  2 卖单 买\n      const resp = this.type === 2 ? await contractOtc.MUSD() : await contractOtc.MAI()\n      if (!resp.success) return\n      this.tokenAddress = resp.result\n    },\n    // 获取授权额度\n    async getAllowance () {\n      // 获取授权额度\n      this.approveLoading = true\n      const resp = await contractToken.allowance(\n        this.tokenAddress,\n        config.otc // 合约地址\n      )\n      this.approveLoading = false\n      if (!resp.success) return\n      this.auth = resp.result > 0\n    },\n    // 授权\n    async approve () {\n      this.approveLoading = true\n      const resp = await contractToken.approve(\n        this.tokenAddress,\n        config.otc // 合约地址\n      )\n      this.approveLoading = false\n      if (!resp.success) return this.$toast('fail')\n      this.$toast('Success')\n      this.auth = true\n    },\n    async handleBatchTrade () {\n      this.batchLoading = true\n      const resp = await contractOtc.batchTrade(this.batchId)\n      this.batchLoading = false\n      if (!resp.success) return\n      this.$emit('close')\n      this.$parent.init()\n      this.$parent.$parent.init()\n    },\n    handleTrade (type, id, info) {\n      this.close()\n      this.$emit('handleTrade', type, id, info)\n    }\n  },\n  mounted () {\n    this.init()\n  }\n}\n</script>\n<style scoped lang=\"scss\">\n.check-box {\n padding: 15px 0;\n box-sizing: border-box;\n border-bottom: 1px solid #F2F2F2;\n &:last-child {\n  border-bottom: none;\n }\n}\n</style>\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./OrderPriceList.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./OrderPriceList.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./OrderPriceList.vue?vue&type=template&id=5ae62e97&scoped=true&\"\nimport script from \"./OrderPriceList.vue?vue&type=script&lang=js&\"\nexport * from \"./OrderPriceList.vue?vue&type=script&lang=js&\"\nimport style0 from \"./OrderPriceList.vue?vue&type=style&index=0&id=5ae62e97&scoped=true&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"5ae62e97\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('VanPopup',{staticClass:\"otc-pop\",staticStyle:{\"background\":\"transparent\",\"width\":\"80%\",\"max-width\":\"375px\",\"min-width\":\"300px\"},on:{\"click-overlay\":_vm.close},model:{value:(_vm.show),callback:function ($$v) {_vm.show=$$v},expression:\"show\"}},[_c('div',{staticClass:\"pop-body\"},[_c('div',{staticClass:\"pop-title\"},[_vm._v(_vm._s(_vm.type === 2 ? _vm.$t('otc.purchase') : _vm.$t('otc.sell')))]),_c('van-field',{staticClass:\"pop-input\",attrs:{\"disabled\":\"\",\"input-align\":\"right\",\"type\":\"number\",\"label\":_vm.$t('otc.price')},scopedSlots:_vm._u([{key:\"button\",fn:function(){return [_vm._v(\"MUSD\")]},proxy:true}]),model:{value:(_vm.orderInfo.price),callback:function ($$v) {_vm.$set(_vm.orderInfo, \"price\", $$v)},expression:\"orderInfo.price\"}}),_c('van-field',{staticClass:\"pop-input\",attrs:{\"disabled\":\"\",\"input-align\":\"right\",\"type\":\"number\",\"label\":_vm.$t('otc.total')},scopedSlots:_vm._u([{key:\"button\",fn:function(){return [_vm._v(\"MAI\")]},proxy:true}]),model:{value:(_vm.orderInfo.remain),callback:function ($$v) {_vm.$set(_vm.orderInfo, \"remain\", $$v)},expression:\"orderInfo.remain\"}}),_c('van-field',{staticClass:\"pop-input\",attrs:{\"input-align\":\"right\",\"type\":\"number\",\"label\":_vm.type === 2 ? _vm.$t('otc.buyNum') : _vm.$t('otc.sellNum'),\"placeholder\":_vm.$t('otc.pleaseInput')},scopedSlots:_vm._u([{key:\"button\",fn:function(){return [_c('van-button',{staticClass:\"max-btn\",attrs:{\"size\":\"small\",\"color\":\"#5E12E7\"},on:{\"click\":_vm.handleMax}},[_vm._v(\"Max\")])]},proxy:true}]),model:{value:(_vm.amount),callback:function ($$v) {_vm.amount=$$v},expression:\"amount\"}}),_c('div',{staticClass:\"pop-balance\"},[_vm._v(_vm._s(_vm.type === 1 ? 'MAI' : 'MUSD')+\": \"+_vm._s(_vm.$gbUtils.formatBalance(_vm.balance)))]),_c('div',{staticClass:\"pop-tips\"},[_vm._v(\" \"+_vm._s(_vm.$t('otc.tradeTips', { num1: _vm.canTradeNum, num2: _vm.orderInfo.remain}))+\"(\"+_vm._s(_vm.$t('otc.remainingTip', {num: _vm.minAmount}))+\")\")]),_c('div',{staticClass:\"pop-tips\"},[(_vm.type === 1)?_c('span',[_vm._v(_vm._s(_vm.$t('otc.expectedToObtain', {num: _vm.needAll})))]):_vm._e(),(_vm.type === 2)?_c('span',[_vm._v(\" \"+_vm._s(_vm.$t('otc.estimatedConsumption', {num: _vm.needAll})))]):_vm._e()]),(!_vm.auth)?_c('van-button',{staticClass:\"pop-btn\",attrs:{\"loading\":_vm.approveLoading},on:{\"click\":_vm.approve}},[_vm._v(_vm._s(_vm.$t('otc.approve')))]):_c('van-button',{staticClass:\"pop-btn\",attrs:{\"disabled\":_vm.amount <= 0 || (_vm.amount > _vm.canTradeNum && _vm.amount != +_vm.orderInfo.remain) || _vm.amount > +_vm.orderInfo.remain,\"loading\":_vm.tradeLoading},on:{\"click\":_vm.handleTrade}},[_vm._v(_vm._s(_vm.type === 1 ? _vm.$t('otc.sell') : _vm.$t('otc.purchase')))])],1),_c('div',{staticClass:\"close-icon\",on:{\"click\":_vm.close}},[_c('img',{attrs:{\"src\":require(\"@/assets/close.png\")}})])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <VanPopup v-model=\"show\" style=\"background: transparent; width:80%; max-width: 375px; min-width: 300px;\" class=\"otc-pop\"\n    @click-overlay=\"close\">\n    <div class=\"pop-body\">\n      <div class=\"pop-title\">{{ type === 2 ? $t('otc.purchase') : $t('otc.sell') }}</div>\n      <van-field disabled=\"\" class=\"pop-input\" input-align=\"right\" type=\"number\" v-model=\"orderInfo.price\"\n        :label=\"$t('otc.price')\">\n        <template #button>MUSD</template>\n      </van-field>\n      <van-field disabled=\"\" class=\"pop-input\" input-align=\"right\" type=\"number\" v-model=\"orderInfo.remain\"\n        :label=\"$t('otc.total')\">\n        <template #button>MAI</template>\n      </van-field>\n      <van-field class=\"pop-input\" input-align=\"right\" type=\"number\" v-model=\"amount\"\n        :label=\"type === 2 ? $t('otc.buyNum') : $t('otc.sellNum')\" :placeholder=\"$t('otc.pleaseInput')\">\n        <template #button>\n          <van-button class=\"max-btn\" size=\"small\" color=\"#5E12E7\" @click=\"handleMax\">Max</van-button>\n        </template>\n      </van-field>\n      <!-- 余额 -->\n      <div class=\"pop-balance\">{{ type === 1 ? 'MAI' : 'MUSD'}}: {{ $gbUtils.formatBalance(balance) }}</div>\n      <!-- 提示 -->\n      <div class=\"pop-tips\"> {{ $t('otc.tradeTips', { num1: canTradeNum, num2: orderInfo.remain}) }}({{ $t('otc.remainingTip', {num: minAmount})}})</div>\n      <div class=\"pop-tips\">\n        <span v-if=\"type === 1\">{{ $t('otc.expectedToObtain', {num: needAll}) }}</span>\n        <span v-if=\"type === 2\"> {{ $t('otc.estimatedConsumption', {num: needAll}) }}</span>\n       </div>\n\n      <!-- 按鈕 -->\n      <van-button class=\"pop-btn\" v-if=\"!auth\" :loading=\"approveLoading\" @click=\"approve\">{{ $t('otc.approve')\n      }}</van-button>\n       <van-button class=\"pop-btn\"\n       v-else\n      :disabled=\"amount <= 0 || (amount > canTradeNum && amount != +orderInfo.remain) || amount > +orderInfo.remain \"\n      :loading=\"tradeLoading\"\n      @click=\"handleTrade\"\n      >{{type === 1 ? $t('otc.sell') : $t('otc.purchase')}}</van-button>\n    </div>\n    <div class=\"close-icon\" @click=\"close\">\n      <img src=\"@/assets/close.png\" />\n    </div>\n  </VanPopup>\n</template>\n\n<script>\nimport contractOtc from '../../../contracts/contractOtc'\nimport contractToken from '../../../contracts/contractToken'\nimport config from '@/config/app.config.js' // 引入配置文件\n\nexport default {\n  name: '',\n  props: ['id', 'type', 'orderInfo'],\n  data () {\n    return {\n      show: true,\n      amount: null,\n      tokenAddress: '',\n      hangLoading: false,\n      balance: 0,\n      minAmount: 0,\n      auth: false,\n      approveLoading: true,\n      tradeLoading: false\n    }\n  },\n  computed: {\n    needAll () {\n      return (this.orderInfo.price * this.amount) || 0\n    },\n    // 可以买的数量范围\n    canTradeNum () {\n      return +this.orderInfo.remain - this.minAmount\n    }\n  },\n  methods: {\n    close () {\n      this.$emit('close')\n    },\n    handleMax () {\n      // 买入 type 2 消耗musd\n      if (this.type === 2) {\n        const maxNeed = this.orderInfo.price * this.orderInfo.remain\n        const canBuyMai = this.balance / this.orderInfo.price\n        this.amount = this.balance >= maxNeed ? this.orderInfo.remain\n          : (canBuyMai >= this.canTradeNum ? this.canTradeNum : canBuyMai)\n      } else {\n        // 卖出 type 1 消耗mai\n        this.amount = (this.balance >= this.orderInfo.remain) ? this.orderInfo.remain\n          : (this.balance >= this.canTradeNum ? this.canTradeNum : this.balance)\n      }\n    },\n    async init () {\n      this.getMinAmount()\n      await this.gettokenAddress()\n      this.getBalance()\n      this.getAllowance()\n    },\n    async getMinAmount () {\n      const resp = await contractOtc.MIN_REMAIN_AMOUNT()\n      if (!resp.success) return\n      this.minAmount = resp.result || 0\n    },\n    async gettokenAddress () {\n      // type 1买单  卖  2 卖单 买\n      const resp = this.type === 2 ? await contractOtc.MUSD() : await contractOtc.MAI()\n      if (!resp.success) return\n      this.tokenAddress = resp.result\n    },\n    async getBalance () {\n      if (!this.tokenAddress) return\n      const resp = await this.$web3.balanceOf(this.tokenAddress)\n      if (!resp.success) return\n      this.balance = resp.result || 0\n    },\n    // 获取授权额度\n    async getAllowance () {\n      // 获取授权额度\n      this.approveLoading = true\n      const resp = await contractToken.allowance(\n        this.tokenAddress,\n        config.otc // 合约地址\n      )\n      this.approveLoading = false\n      if (!resp.success) return\n      this.auth = resp.result > 0\n    },\n    // 授权\n    async approve () {\n      this.approveLoading = true\n      const resp = await contractToken.approve(\n        this.tokenAddress,\n        config.otc // 合约地址\n      )\n      this.approveLoading = false\n      if (!resp.success) return this.$toast('fail')\n      this.$toast('Success')\n      this.auth = true\n    },\n    async handleTrade () {\n      this.tradeLoading = true\n      const resp = await contractOtc.trade(this.id, this.amount)\n      this.tradeLoading = false\n      if (!resp.success) return\n      this.$emit('close')\n      this.$parent.init()\n      this.$parent.$parent.init()\n    }\n  },\n  mounted () {\n    this.init()\n  }\n}\n</script>\n\n<style scoped lang=\"scss\"></style>\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TradePop.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TradePop.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./TradePop.vue?vue&type=template&id=7302e980&scoped=true&\"\nimport script from \"./TradePop.vue?vue&type=script&lang=js&\"\nexport * from \"./TradePop.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"7302e980\",\n  null\n  \n)\n\nexport default component.exports","<template>\n  <div class=\"total-box\">\n    <div class=\"order-item\">{{ price }}</div>\n    <div class=\"order-item\">{{ $gbUtils.formatBalance(totalAmount) }}</div>\n    <div class=\"order-item\">\n      <van-button disabled class=\"check-item\" @click=\"handleCheck\">{{type === 1 ?  $t('otc.sell') : $t('otc.purchase')}}</van-button>\n    </div>\n    <OrderPriceList v-if=\"priceListShow\"\n    :price=\"price\" :type=\"type\"\n    @close=\"handleCheck\"\n    @handleTrade=\"handleTrade\"\n    />\n    <TradePop v-if=\"tradeShow\" @close=\"() => {tradeShow = false}\"\n      :id=\"curId\" :type=\"curType\" :orderInfo=\"curInfo\"\n      />\n  </div>\n</template>\n\n<script>\nimport contractOtc from '../../../contracts/contractOtcV1'\nimport OrderPriceList from './OrderPriceList.vue'\nimport TradePop from './TradePop.vue'\n\nexport default {\n  name: '',\n  props: ['price', 'type'],\n  components: { OrderPriceList, TradePop },\n  data () {\n    return {\n      totalAmount: 0,\n      priceListShow: false,\n      tradeShow: false,\n      curId: '',\n      curType: '',\n      curInfo: '',\n      timer: null\n    }\n  },\n  watch: {\n    price (val) {\n      this.init()\n    }\n  },\n  methods: {\n    init () {\n      this.getPriceTotals()\n    },\n    async getPriceTotals () {\n      const resp = await contractOtc.getPriceTotals(this.type, this.price)\n      if (!resp.success) return\n      this.totalAmount = resp.result || 0\n    },\n    // 查看\n    handleCheck () {\n      this.priceListShow = !this.priceListShow\n    },\n    // 单个买入\n    handleTrade (type, id, info) {\n      this.curType = type\n      this.curId = id\n      this.curInfo = info\n      this.tradeShow = true\n    },\n    initTimer () {\n      this.timer = setInterval(() => {\n        this.init()\n      }, 15000)\n    }\n  },\n  mounted () {\n    this.init()\n    this.initTimer()\n  },\n  beforeDestroy () {\n    clearInterval(this.timer)\n    this.timer = null\n  }\n}\n</script>\n\n<style scoped lang=\"scss\">\n.total-box {\n  display: flex;\n  align-items: center;\n  .order-item {\n    width: 33%;\n    margin-top: 20px;\n    text-align: center;\n    align-items: center;\n    font-size: 14px;\n    .check-item {\n      height: 24px;\n      background: #18191A;\n      border: 1px solid #8080FF!important;\n      border-radius: 12px;\n      color: #8080FF;\n      font-size: 14px;\n    }\n  }\n}\n</style>\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./OrderPiceTotal.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./OrderPiceTotal.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./OrderPiceTotal.vue?vue&type=template&id=6eec799e&scoped=true&\"\nimport script from \"./OrderPiceTotal.vue?vue&type=script&lang=js&\"\nexport * from \"./OrderPiceTotal.vue?vue&type=script&lang=js&\"\nimport style0 from \"./OrderPiceTotal.vue?vue&type=style&index=0&id=6eec799e&scoped=true&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"6eec799e\",\n  null\n  \n)\n\nexport default component.exports","<template>\n  <div class=\"order-box\">\n    <div class=\"order-tilte\">\n      <div class=\"left\">{{ type === 1 ? $t('otc.buyOrder') : $t('otc.soldOrder') }}</div>\n      <van-button disabled class=\"btn\"  @click=\"handleShowHang\">{{ type === 1 ? $t('otc.hangBuy') : $t('otc.hangSale') }}</van-button>\n    </div>\n    <div class=\"order-list\">\n      <div class=\"list-tab\">\n        <div class=\"tab\">{{ $t('otc.price') }}(MU)</div>\n        <div class=\"tab\">{{ $t('otc.total') }}(MAI)</div>\n      </div>\n      <div class=\"list-box\">\n        <OrderPiceTotal ref=\"OrderPiceTotal\" v-for=\"(item, index) in priceList\" :key=\"index\" :price=\"item\" :type=\"type\"/>\n        <van-empty v-if=\"!priceList.length\" />\n      </div>\n    </div>\n    <!-- 挂买 -->\n    <HangBuy v-if=\"type === 1 && hangPopShow\"\n    :lastPrice=\"lastPrice\"\n    @close=\"handleShowHang\"/>\n    <!-- 挂卖 -->\n    <HangSale v-if=\"type === 2 && hangPopShow\" @close=\"handleShowHang\"\n    :lastPrice=\"lastPrice\"/>\n  </div>\n</template>\n\n<script>\nimport HangBuy from './HangBuy.vue'\nimport HangSale from './HangSale.vue'\nimport OrderPiceTotal from './OrderPiceTotal.vue'\nimport contractOtc from '../../../contracts/contractOtcV1'\n\nexport default {\n  name: '',\n  components: { HangBuy, HangSale, OrderPiceTotal },\n  props: ['type', 'lastPrice'],\n  data () {\n    return {\n      hangPopShow: false,\n      priceList: [],\n      offset: 0,\n      size: 10,\n      num: 1,\n      timer: null\n    }\n  },\n  methods: {\n    handleShowHang () {\n      this.hangPopShow = !this.hangPopShow\n    },\n    async getList () {\n      const resp = await contractOtc.getMarketPrices(this.type, this.offset, this.size)\n      if (!resp.success) return\n      var tempList = (resp.result || []).map(item => {\n        return this.$web3.fromWei(item)\n      })\n      // type 1 降序 2 升序\n      if (this.type === 1) {\n        tempList.sort((a, b) => {\n          return b - a\n        })\n      } else {\n        tempList.sort((a, b) => {\n          return a - b\n        })\n      }\n      this.priceList = tempList\n    },\n    init () {\n      this.getList()\n    },\n    initTimer () {\n      this.timer = setInterval(() => {\n        this.init()\n      }, 15000)\n    }\n  },\n  mounted () {\n    this.init()\n    this.initTimer()\n  },\n  beforeDestroy () {\n    clearInterval(this.timer)\n    this.timer = null\n  }\n}\n</script>\n\n<style scoped lang=\"scss\">\n.order-box {\n  background: #252525;\n  border-radius: 25px;\n  margin-top: 20px;\n  padding: 20px;\n  box-sizing: border-box;\n  .order-tilte {\n    display: flex;\n    align-items: center;\n    justify-content: space-between;\n    font-size: 16px;\n    font-weight: 500;\n    .btn {\n      background: #6667FF;\n      height: 28px;\n      border-radius: 30px;\n      color: #fff;\n      font-size: 14px;\n    }\n  }\n  .order-list {\n    background: #18191A;\n    margin-top: 20px;\n    padding: 20px;\n    box-sizing: border-box;\n    border-radius: 20px;\n  }\n  .list-tab {\n    display: flex;\n    font-size: 12px;\n    color: rgba($color: #fff, $alpha: 0.6);\n    .tab {\n      width: 33%;\n      text-align: center;\n    }\n  }\n  .list-box {\n    max-height: 280px;\n    overflow-y: auto;\n  }\n}\n</style>\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./OrderBox.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./OrderBox.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./OrderBox.vue?vue&type=template&id=6a574c80&scoped=true&\"\nimport script from \"./OrderBox.vue?vue&type=script&lang=js&\"\nexport * from \"./OrderBox.vue?vue&type=script&lang=js&\"\nimport style0 from \"./OrderBox.vue?vue&type=style&index=0&id=6a574c80&scoped=true&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"6a574c80\",\n  null\n  \n)\n\nexport default component.exports","<template>\n  <div class=\"otc-page\">\n    <div class=\"otc-title\">\n      <div class=\"left\">{{ $t('otc.title') }} (Old)</div>\n      <div class=\"right\" @click=\"$gbUtils.handleToPage('/myHangOrderV1')\">\n        <span>{{ $t('otc.myOrder') }}</span>\n        <van-icon name=\"arrow\" />\n      </div>\n    </div>\n    <div class=\"last-price\">\n      <div class=\"price-box\">\n        <span>{{ lastPrice }}</span>\n        <span>MUSD/MAI</span>\n      </div>\n      <div class=\"ptice-tips\">{{ $t('otc.lastPrice') }}</div>\n    </div>\n    <!-- 卖单 -->\n    <OrderBox :type=\"2\" :lastPrice=\"lastPrice || 0\"/>\n    <!-- 买单 -->\n    <OrderBox :type=\"1\" :lastPrice=\"lastPrice || 0\" />\n  </div>\n</template>\n\n<script>\nimport contractOtc from '../../contracts/contractOtcV1'\nimport OrderBox from './components/OrderBox.vue'\n\nexport default {\n  name: 'OtcTransactionV1',\n  components: { OrderBox },\n  data () {\n    return {\n      lastPrice: 0,\n      type: 2 // 1买; 2-卖\n    }\n  },\n  methods: {\n    async getLastPrice () {\n      const resp = await contractOtc.lastPrice()\n      if (!resp.success) return\n      this.lastPrice = resp.result\n    },\n    init () {\n      this.getLastPrice()\n    }\n  },\n  mounted () {\n    this.init()\n  }\n}\n</script>\n\n<style scoped lang=\"scss\">\n.otc-page {\n  color: #fff;\n  padding: 24px;\n  box-sizing: border-box;\n\n  .otc-title {\n    display: flex;\n    align-items: center;\n    justify-content: space-between;\n\n    .left {\n      font-size: 16px;\n      font-weight: 500;\n    }\n\n    .right {\n      color: rgba(255, 255, 255, 0.8);\n      font-size: 14px;\n    }\n  }\n\n  .last-price {\n    margin-top: 30px;\n    text-align: center;\n\n    .price-box {\n      line-height: 1.5em;\n      font-size: 18px;\n      background: linear-gradient(90deg, #FFAD43 22.52%, #FF7C6B 38.33%, #FD5090 53.24%, #662BFC 65.89%);\n      -webkit-background-clip: text;\n      -webkit-text-fill-color: transparent;\n\n      :first-child {\n        font-size: 24px;\n        margin-right: 10px;\n        font-weight: 500;\n      }\n    }\n    .ptice-tips {\n      font-size: 16px;\n      color: rgba(255, 255, 255, 0.6);\n      line-height: 1.5em;\n    }\n  }\n}</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./OtcTransaction.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./OtcTransaction.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./OtcTransaction.vue?vue&type=template&id=1d811b92&scoped=true&\"\nimport script from \"./OtcTransaction.vue?vue&type=script&lang=js&\"\nexport * from \"./OtcTransaction.vue?vue&type=script&lang=js&\"\nimport style0 from \"./OtcTransaction.vue?vue&type=style&index=0&id=1d811b92&scoped=true&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"1d811b92\",\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../../../node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./OrderPriceInfo.vue?vue&type=style&index=0&id=21fa6f1e&scoped=true&lang=scss&\"","export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../../../node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./OrderPiceTotal.vue?vue&type=style&index=0&id=6eec799e&scoped=true&lang=scss&\"","export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../../../node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./OrderPriceList.vue?vue&type=style&index=0&id=5ae62e97&scoped=true&lang=scss&\""],"sourceRoot":""}