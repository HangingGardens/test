(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7862274e"],{"290d":function(t,e,n){},"78a3":function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAADeSURBVHgBpZJLzgFREEZP3b//gYSkd4BEJEbYATuwBHZyl2AHLMEO2IEYSUSCHfTEyKPcbibcRnc7w/uo+uqkBIcubUhZh1wlJA2jEWeZScvu/au1rVFhiUibd6h0+GeeNHohINAByEIadsQHdGOnlFxKGD8XuMc+8AVp2mHaeZDaLYcT433O6cRPkNOJXyCjE5S9SxkafsQkQv6oUhBDIFOu9HRrJxTASN1GXOijuqIAicTHjo8pgC8xq5P4jWokr+e6c1t4cotkWLjRDm8/O2/x6F6CTE7iuyPdePQbK+tik+YbC/QAAAAASUVORK5CYII="},ba53:function(t,e,n){"use strict";n("290d")},cf11:function(t,e,n){t.exports=n.p+"img/home-7.7a49c00e.jpg"},d903:function(t,e,n){t.exports=n.p+"img/home-6.3324eade.jpg"},f922:function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"wrap"},[a("div",["ZH"===t.lang?a("img",{staticClass:"top-img",attrs:{src:n("cf11")}}):a("img",{staticClass:"top-img",attrs:{src:n("d903")}})]),a("div",{staticClass:"title-box"},[a("div",{staticClass:"marketing"},[t._v(t._s(t.ecology.marketing))]),a("div",{staticClass:"Genesis"},[t._v("———"+t._s(t.ecology.Genesis))])]),a("div",{staticClass:"donate-box"},[a("div",{staticClass:"yinxiao-box"},[a("div",{staticClass:"edu"},[t._v(t._s(t.ecology.total))]),a("div",{staticClass:"money"},[t._v(" "+t._s(this.$t("ecology.individual",{total:t.donatedInfo.donatedCount*t.donatedInfo.amount/1e5||0}))+" ")])]),a("div",{staticClass:"yinxiao-box"},[a("div",{staticClass:"edu"},[t._v(t._s(t.ecology.purpose))]),a("div",{staticClass:"money"},[t._v(t._s(t.ecology.mark))])]),a("div",{staticClass:"yinxiao-box"},[a("div",{staticClass:"edu"},[t._v(t._s(t.ecology.Number))]),a("div",{staticClass:"money"},[t._v(" "+t._s(this.$t("ecology.Donation",{nunber:t.donatedInfo.amount/1e5||0}))+" ")])]),a("div",{staticClass:"yinxiao-box"},[a("div",{staticClass:"edu"},[t._v(t._s(t.ecology.equity))]),a("div",{staticClass:"money"},[t._v(t._s(t.ecology.dividend))])]),a("div",{staticClass:"yinxiao-box"},[a("div",{staticClass:"edu"},[t._v(t._s(t.ecology.Current))]),a("div",{staticClass:"money"},[t._v(" "+t._s(this.$t("ecology.have",{value:t.donatedInfo.donatedCount||0}))+t._s(this.$t("ecology.remaining",{value:t.donatedInfo.donateLimit-t.donatedInfo.donatedCount||0}))+" ")])]),a("div",{staticClass:"yinxiao-box"},[a("div",{staticClass:"edu"},[t._v(t._s(t.ecology.quantity))]),a("div",{staticClass:"money"},[t._v(t._s(this.$t("ecology.individual",{total:t.donatedInfo.totalCount/1e5||0})))])]),a("div",{staticClass:"adress-box"},[a("div",{staticClass:"edu"},[t._v(t._s(t.ecology.address))]),a("div",{staticClass:"address",on:{click:function(e){return t.handleCopy(t.lightingAddress)}}},[a("div",{staticClass:"title"},[t._v(t._s(t.$gbUtils.formatAddress(t.lightingAddress)))]),a("img",{staticClass:"copy-img",attrs:{src:n("78a3")}})])])]),t.authLp?a("van-button",{staticClass:"btn-div",attrs:{loading:t.loadingApprove,disabled:t.donatedInfo.donateLimit===t.donatedInfo.donatedCount||t.flag},on:{click:t.approveDonation}},[t._v(t._s(t.ecology.now))]):a("van-button",{staticClass:"btn-div",attrs:{loading:t.approveLoading,disabled:t.donatedInfo.donateLimit===t.donatedInfo.donatedCount||t.flag},on:{click:t.approveLP}},[t._v(t._s(t.ecology.grant))]),a("van-button",{staticClass:"btn-div",on:{click:function(e){return t.go("/donateDividends")}}},[t._v(t._s(t.ecology.fen))])],1)},o=[],s=n("1da1"),i=n("5530"),d=(n("96cf"),n("2f62")),c=n("3c47"),r=n("1f5d"),l=n("f645"),u={name:"propaganda",components:{},data:function(){return{donatedInfo:{},lightingAddress:l["a"].donationAddress,eggShowTotal:!1,shade:!1,loadingApprove:!1,authLp:!1,approveLoading:!1,lpAllowance:0,flag:!1,lang:"ZH"}},computed:Object(i["a"])(Object(i["a"])({},Object(d["c"])(["mbLang"])),{},{propaganda:function(){return this.$t("ecology.propaganda")},ecology:function(){return this.$t("ecology")}}),methods:{init:function(){this.handledonationInfo(),this.handleIsable()},go:function(t){this.$gbUtils.handleToPage(t)},getAllowance:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.approveLoading=!0,e.next=3,r["a"].allowance(t.donatedInfo.token,t.lightingAddress);case 3:n=e.sent,console.log(n,"dede"),n.success&&(t.lpAllowance=n.result,t.authLp=t.lpAllowance>0),t.approveLoading=!1;case 7:case"end":return e.stop()}}),e)})))()},approveLP:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.approveLoading=!0,e.next=3,r["a"].approve(t.donatedInfo.token,t.lightingAddress);case 3:if(n=e.sent,t.approveLoading=!1,n.success){e.next=7;break}return e.abrupt("return",t.$toast("fail"));case 7:t.$toast("Success"),t.authLp=!0;case 9:case"end":return e.stop()}}),e)})))()},approveDonation:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return console.log(212),t.loadingApprove=!0,console.log(t.donatedInfo.amount),e.next=5,c["a"].donatedNow(t.donatedInfo.token,t.donatedInfo.amount);case 5:if(n=e.sent,console.log(n,"dge"),t.loadingApprove=!1,n.success){e.next=10;break}return e.abrupt("return",t.$toast("fail"));case 10:t.$toast("success"),t.init();case 12:case"end":return e.stop()}}),e)})))()},handleCopy:function(t){var e=document.createElement("textarea");e.value=t,document.body.appendChild(e),e.select(),document.execCommand("copy")&&(document.execCommand("copy"),this.$toast("copied")),document.body.removeChild(e)},handleToPage:function(t){if(!t)return!1;window.open(t)},handleShowTotal:function(){this.eggShowTotal=!this.eggShowTotal,this.shade=!0},handleIsable:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,c["a"].queryDonated();case 2:n=e.sent,t.flag=n.result,console.log(t.flag,"xiangq");case 5:case"end":return e.stop()}}),e)})))()},handledonationInfo:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,c["a"].donatedInfo();case 2:n=e.sent,t.donatedInfo=n.result,t.donatedInfo.amount=t.$web3.fromWei(t.donatedInfo.amount),t.donatedInfo.totalCount=t.$web3.fromWei(t.donatedInfo.totalCount),console.log(n,"de"),t.getAllowance();case 8:case"end":return e.stop()}}),e)})))()},changeLange:function(t){this.lang=t}},mounted:function(){this.lang=localStorage.getItem("dappLang"),this.handledonationInfo(),this.handleIsable()}},g=u,v=(n("ba53"),n("2877")),p=Object(v["a"])(g,a,o,!1,null,"32a5164d",null);e["default"]=p.exports}}]);
//# sourceMappingURL=chunk-7862274e.54836802.js.map