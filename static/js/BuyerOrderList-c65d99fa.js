import{_ as q,d as z,A as E,B as F,a,m as G,D as M,ae as A,o as H,E as f,e as m,g as k,G as p,t as b,H as u,b as n,F as B,s as L,k as x,L as S,j as J,h as K}from"./index-7014d71a.js";import{B as P}from"./BackIcon-6353c43d.js";import{B as Q}from"./BuyerDeliveredItem-b586473e.js";import{o as W}from"./order-fa446aaf.js";import"./useOrderStatus-fd9dccc1.js";const X={class:"px-3 bg-[#f2f0ef]"},Y={class:"flex-start gap-2 mt-2"},Z={key:0,class:"flex justify-end mt-5"},ee=z({setup(ae){const{t}=E(),V=F(),s=a(0),C=G({tabList:[{id:1,name:t("order.wait")},{id:2,name:t("order.already")},{id:-1,name:t("order.all")}]}),w=M(()=>[{id:1,name:t("order.wait")},{id:2,name:t("order.already")},{id:-1,name:t("order.all")}]),g=A();g.query.active&&(s.value=Number(g.query.active));const o=a([]),r=a(!1),l=a(!1),d=a(0),T=a(10),h=a(0),_=async()=>{r.value=!0,d.value+=1,await $(),r.value=!1},y=a([]),$=async()=>{const e=await W({page:d.value,size:T.value,status:C.tabList[s.value].id,type:2});if(r.value=!1,!e.success){l.value=!0;return}if(!e.data||!e.total){l.value=!0;return}h.value=e.total,y.value=e.data,o.value=d.value===1?y.value:o.value.concat(y.value),o.value.length>=h.value&&(l.value=!0)},N=e=>{s.value=e,d.value=0,l.value=!1,o.value=[],_()},D=async()=>{},I=e=>{V.push(e)};return H(()=>{_()}),(e,c)=>{const O=f("VanButton"),R=f("VanList"),U=f("VanTab"),j=f("VanTabs");return n(),m("div",X,[k("div",Y,[p(P),k("div",null,b(e.$t("order.order")),1)]),p(j,{active:s.value,"onUpdate:active":c[1]||(c[1]=v=>s.value=v),onChange:N,background:"#f2f0ef",sticky:""},{default:u(()=>[(n(!0),m(B,null,L(K(w),v=>(n(),x(U,{title:v.name,key:v.id},{default:u(()=>[p(R,{loading:r.value,"onUpdate:loading":c[0]||(c[0]=i=>r.value=i),finished:l.value,"finished-text":e.$t("common.noMore"),"loading-text":e.$t("common.loading"),onLoad:_},{default:u(()=>[(n(!0),m(B,null,L(o.value,i=>(n(),x(Q,{key:i.id,onClick:te=>I(`/buyerOrderDetail?id=${i.id}`),order:i},{default:u(()=>[s.value===1?(n(),m("div",Z,[p(O,{round:"",class:"btn text-primary px-6 h-9 font-semibold",onClick:D},{default:u(()=>[S(b(e.$t("order.confirmGeted")),1)]),_:1})])):J("v-if",!0)]),_:2},1032,["onClick","order"]))),128))]),_:1},8,["loading","finished","finished-text","loading-text"])]),_:2},1032,["title"]))),128))]),_:1},8,["active"])])}}}),ie=q(ee,[["__scopeId","data-v-cf97398a"],["__file","/Users/wangkeai/work/xueyan/mai/flashmall-dapp/src/view/order/BuyerOrderList.vue"]]);export{ie as default};
