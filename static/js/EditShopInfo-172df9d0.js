import{_ as se,d as ae,J as ne,A as de,a as f,C as E,o as ie,E as r,e as ue,g as l,G as a,t as n,H as i,h as u,M as x,j as re,L as A,ak as K,P as L,T as V,al as pe,b as ce,p as ve,l as me}from"./index-0ff3af4d.js";import{B as he}from"./BackIcon-c83fbfc0.js";import{u as H}from"./upload-7f863588.js";import{d as fe}from"./category-aef39e72.js";import{b as ge,a as ye}from"./shop-90ae819b.js";const we="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAHgAAAB5CAYAAADyOOV3AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAUpSURBVHgB7Z2LURtXFIb/u7IERjy04wZEBSEVBFcQUgG4giQVxHSQDowr8KQCSAUmFaAGMndZrRBIaK/vWXmxBJKQBj/uHv5vRqPVPmZ29Oncc58rgyeSWbuXA3sOaGH8Ik8nMUAn8q/NOD7HEzBYEWdtKwWOjMGv/uMeKPV7cAaH93X//jKOO6tcuLTgvrXt2wi/O4cjUOqPw+CknuN4WdGPCpaIzcZi/wDFBoMvQd9u7cTHj5636KBE7dDg1G+2QUKkU3d4vSiao3kHutbue7kfQbkhIwH4MbX2YN4JMwVnqT1048hlkRw+LV8Of8jS9HDWwQdFdNHsGUcuqRZJ5Ivr+82qqQiWnOvlfgCpIi1xJw4nd04JHkb4C8y5VUZy8rvJHXeCfaI+wriNS6rNvlSQyw93OThN7AUYvVrobLfiXdkoIriIXsrVRLuM4nERbXAIogrfzJX6FMzn3qoLEHWMHOJo6JMyiEpqwIFvGxdDfkQh4jbyoxI/gejE4BepZLVBVOLbwC3j278ORC0RiGooWDkUrBwKVg4FK4eClUPByqFg5VCwcihYORSsHApWDgUrh4KVQ8HKoWDlULByKFg5LxAwzuXIrvro968xGo0QErVaDY1GHVvNZrEdKsEKFqH/2yQ4sSVyX/3+CIPBEK/iVrCSgy2iQ5Y7idxjkqYIlSAF3wwGlZBbIlE88PccIkEKli+sagxvbxEiQVeyJtn0lZmtzSZCoJv1kPV6U/vyPMzp5WwmKYeClUPByqFg5VCwcihYORSsHApWDgUrh4KVQ8HKoWDlULByKFg5FKwcClYOBSvn2Qu+vrmp1PyvVXnWgkXsZdqFTS6LOdgaebaCRahMzc3zvJgwJ/OsNKJOsERl7+rq0fO62dVU0dy76i91XdVQJbiMyrSbLZyn3O31ZsrMfBRry8eqBF96saUgyauzZElxnM0pjnPnih+IpnysRrBEpSxSK5klS4SL+EXIOZrysQrBstRlVlQW64Yuv6wbSnyNeZkiWFM+rszKhnmUTZ15XN8MiugWVlk/JD+Y9bW1oJeGLkPlI3herp1EZGUrFrta8nGlBUtkfstFXxrycWUFS47MvsOXX/V8XNkc3NzYKF5kMRxNUg4FK4eClUPBygmykhVF5sE+eWTC/ccmkMcJMoLrL6pXuV9r1BEiQQpuNBrFU+SqQq0WFfccIsHm4Nb2dvHFhY7c46s4RqgE/feyZVfhYCgPRgurT1gGITbW19FsvoQx4f4Q+f/BymEzSTkUrBwKVg4FK4eClUPByqFg5VCwcihYORSsHApWDgUrh4KVQ8HKoWDlULByKFg5FKwcEdwB0UpHppgnIFrpRLnDvyAqcQ7/SQSfg6hE3BprbatmYEHUMXLYjeI4lhx8BqKNM++2UzSTjMMxiC4c3svb3TrNy8Re+A9tkMrjfO15pxXvyvZdR0fk8AZEBZMl8tRK6zSxp/5tH6S6mOhke2fnLlinuip9reuNY89WZRF3ozyfqk89eFZCZu1ebiCR3AKpFD5Af/Y156l+jQeDDZtygsOfINXCl7735Qpm3vmptQf+6DswkoPGF8uJryD/thXHZ7OOm0UX+16utu/LPGXzKUwk5/qxhNfSoTHvnIXjwXKhtKccO0KCQqJWnOTjnNtZdK7BkhTRDLw1BocgPwQRKz1UOfD3Y2JLlhZcIqJr0lYei94H+aaIVBkV8hH7jxd78nnsYGlWFnyfolnlc7Qb52lWyL4OIjXxJeb55oya8Sp8AkNHH+Kye57UAAAAAElFTkSuQmCC",Q=""+new URL("../images/info-arrow-84b360cc.svg",import.meta.url).href;const U=S=>(ve("data-v-0906f736"),S=S(),me(),S),Ve={class:"px-3 text-default text-sm"},Ae={class:"flex-start gap-2 mt-2"},Se={class:"rounded-xl bg-white px-2 py-4 mt-4"},_e={class:"flex-center-bw"},Ue={class:"key"},ke=U(()=>l("div",{class:"w-[50px] h-[50px] rounded-xl bg-gray1 text-center text-lg text-[#d9d9d9] font-bold"},[l("img",{src:we})],-1)),Ce={class:"flex-center-bw mt-4"},be={class:"key"},Ie={class:"flex-center-bw mt-4"},Be={class:"key"},Re={class:"value"},Fe={class:"flex-center-bw mt-4"},Ee={class:"key"},xe={class:"value"},Ke={class:"flex-center-bw mt-4"},Le={class:"key"},He=A("%"),Qe={class:"flex-center-bw mt-4"},Oe={class:"key"},$e={class:"value"},qe={class:"flex-center-bw mt-4"},Ne={class:"key"},Xe={class:"value flex-start gap-1"},Te=U(()=>l("img",{src:Q,class:"w-[6px]",alt:""},null,-1)),Me={class:"flex-center-bw mt-4"},Ze={class:"key"},We={class:"flex-center-bw mt-4"},Ye={class:"key"},De={class:"value flex-start gap-1"},Je=U(()=>l("img",{src:Q,class:"w-[6px]",alt:""},null,-1)),Pe={class:"flex-center-bw mt-4"},je={class:"key"},ze=U(()=>l("img",{src:Q,class:"w-[6px]",alt:""},null,-1)),Ge={class:"flex-center-bw mt-4"},eo={class:"key"},oo=ae({setup(S){const{currentLocale:q,changeLocale:lo}=ne(),{t:g,messages:N}=de(),X=N.value[q.value].areaList,_=f(!1),p=f(""),c=f(""),[k,C]=E(!1),[b,I]=E(!1),[B,R]=E(!1),s=f({logo:null,storeName:null,openingHours:null,discountRatio:null,classId:1,contact:null,location:null,scenery:null,qrCode:null,contactAddress:null}),O=f([]),T=async()=>{const e=await fe();!e.success||(O.value=(e.data||[]).map(o=>({value:o.id,text:o.name})))},M=e=>e>80?80:e,v=f([]),m=f([]),h=f([]),Z=async e=>{const o=await K(e,"shopLogo"),d=await H(o);if(!d.success)return v.value.length-=1;v.value[v.value.length-1]={url:L.imgUrl+d.data}},W=async e=>{const o=await K(e,"shopScenery"),d=await H(o);if(!d.success)return m.value.length-=1;m.value[m.value.length-1]={url:L.imgUrl+d.data}},Y=async e=>{const o=await K(e,"shopScenery"),d=await H(o);if(!d.success)return h.value.length-=1;h.value[h.value.length-1]={url:L.imgUrl+d.data}},D=e=>{if(console.log(e),!e[0].code||!e[1].code)return V(g("common.choose address"));s.value.location=[...new Set(e.map(o=>o.name))].join(""),C(!1)},J=e=>{p.value=e,I(!1)},P=e=>{c.value=e,R(!1)},j=async()=>{if(_.value)return;if(!v.value.length)return V(g("shop.emptyLogo"));if(!s.value.storeName)return V(g("shop.emptyName"));if(!p.value)return V(g("shop.emptyOpenTime"));if(!c.value)return V(g("shop.emptyEndTime"));if(!s.value.discountRatio||s.value.discountRatio<=0)return V(g("shop.emptyRadio"));if(!s.value.classId)return V(g("shop.emptyClass"));_.value=!0,s.value.logo=v.value[0].url,s.value.scenery=m.value.length?m.value[0].url:"",s.value.qrCode=h.value.length?h.value[0].url:"",s.value.openingHours=`${p.value} - ${c.value}`,console.log(s.value);const e=await ge(s.value);_.value=!1,e.success&&pe.back()},z=async()=>{var o,d,y;const e=await ye();if(!(!e.success||!e.data)){if(s.value=e.data,e.data.openingHours){const w=e.data.openingHours.split("-");p.value=w[0].trim(),c.value=w[1].trim()}(o=e.data)!=null&&o.logo&&(v.value[0]={url:e.data.logo}),(d=e.data)!=null&&d.scenery&&(m.value[0]={url:e.data.scenery}),(y=e.data)!=null&&y.qrCode&&(h.value[0]={url:e.data.qrCode})}},G=()=>{T(),z()};return ie(()=>{G()}),(e,o)=>{const d=r("van-uploader"),y=r("VanField"),w=r("van-field"),$=r("van-datetime-picker"),F=r("van-popup"),ee=r("van-dropdown-item"),oe=r("van-dropdown-menu"),le=r("van-area"),te=r("VanButton");return ce(),ue("div",Ve,[l("div",Ae,[a(he),l("div",null,n(e.$t("order.shopInfo")),1)]),l("div",Se,[l("div",_e,[l("div",Ue,n(e.$t("shop.shopLogo")),1),a(d,{modelValue:v.value,"onUpdate:modelValue":o[0]||(o[0]=t=>v.value=t),accept:"image/*","max-count":1,"preview-size":"50",afterRead:Z},{default:i(()=>[ke]),_:1},8,["modelValue"])]),l("div",Ce,[l("div",be,n(e.$t("shop.shopName")),1),a(y,{class:"value","input-align":"right",modelValue:s.value.storeName,"onUpdate:modelValue":o[1]||(o[1]=t=>s.value.storeName=t),placeholder:e.$t("shop.pleaseInput")},null,8,["modelValue","placeholder"])]),l("div",Ie,[l("div",Be,n(e.$t("shop.openTime")),1),l("div",Re,[a(w,{"input-align":"right",autocomplete:"off",placeholder:e.$t("shop.pleaseSelect"),disabled:"","model-value":p.value,"onUpdate:model-value":o[2]||(o[2]=t=>p.value=t),onClick:o[3]||(o[3]=t=>u(I)(!0))},null,8,["placeholder","model-value"]),a(F,{round:"",show:u(b),"onUpdate:show":o[6]||(o[6]=t=>x(b)?b.value=t:null),position:"bottom",style:{height:"40%"}},{default:i(()=>[a($,{modelValue:p.value,"onUpdate:modelValue":o[4]||(o[4]=t=>p.value=t),type:"time",title:"\u9009\u62E9\u65F6\u95F4","min-hour":0,"max-hour":24,onConfirm:J,onCancel:o[5]||(o[5]=t=>u(I)(!1))},null,8,["modelValue"])]),_:1},8,["show"])])]),l("div",Fe,[l("div",Ee,n(e.$t("shop.endTime")),1),l("div",xe,[a(w,{"input-align":"right",autocomplete:"off",placeholder:e.$t("shop.pleaseSelect"),disabled:"","model-value":c.value,"onUpdate:model-value":o[7]||(o[7]=t=>c.value=t),onClick:o[8]||(o[8]=t=>u(R)(!0))},null,8,["placeholder","model-value"]),a(F,{round:"",show:u(B),"onUpdate:show":o[11]||(o[11]=t=>x(B)?B.value=t:null),position:"bottom",style:{height:"40%"}},{default:i(()=>[a($,{modelValue:c.value,"onUpdate:modelValue":o[9]||(o[9]=t=>c.value=t),type:"time",title:"\u9009\u62E9\u65F6\u95F4","min-hour":0,"max-hour":24,onConfirm:P,onCancel:o[10]||(o[10]=t=>u(R)(!1))},null,8,["modelValue"])]),_:1},8,["show"])])]),re(` <div class="flex-center-bw mt-4">
        <div class="key">{{ $t('shop.shopTime') }}</div>
        <VanField class="value" input-align="right" v-model="info.openingHours" :placeholder="$t('shop.pleaseInput')" />
      </div> `),l("div",Ke,[l("div",Le,n(e.$t("shop.shopRateSetting")),1),a(w,{class:"value","input-align":"right",modelValue:s.value.discountRatio,"onUpdate:modelValue":o[12]||(o[12]=t=>s.value.discountRatio=t),type:"digit",placeholder:e.$t("shop.pleaseInputPoint"),formatter:M},{"right-icon":i(()=>[He]),_:1},8,["modelValue","placeholder"])]),l("div",Qe,[l("div",Oe,n(e.$t("shop.shopCategory")),1),l("div",$e,[a(w,{"input-align":"right",autocomplete:"off"},{input:i(()=>[a(oe,{"active-color":"#FEA021"},{default:i(()=>[a(ee,{modelValue:s.value.classId,"onUpdate:modelValue":o[13]||(o[13]=t=>s.value.classId=t),options:O.value},null,8,["modelValue","options"])]),_:1})]),_:1})])]),l("div",qe,[l("div",Ne,n(e.$t("shop.shopPhoto")),1),a(d,{modelValue:m.value,"onUpdate:modelValue":o[14]||(o[14]=t=>m.value=t),accept:"image/*","max-count":1,"preview-size":"50",afterRead:W},{default:i(()=>[l("div",Xe,[A(n(e.$t("shop.upload"))+" ",1),Te])]),_:1},8,["modelValue"])]),l("div",Me,[l("div",Ze,n(e.$t("shop.contact")),1),a(y,{class:"value","input-align":"right",modelValue:s.value.contact,"onUpdate:modelValue":o[15]||(o[15]=t=>s.value.contact=t),placeholder:e.$t("shop.pleaseInput")},null,8,["modelValue","placeholder"])]),l("div",We,[l("div",Ye,n(e.$t("shop.qrCode")),1),a(d,{modelValue:h.value,"onUpdate:modelValue":o[16]||(o[16]=t=>h.value=t),accept:"image/*","max-count":1,"preview-size":"50",afterRead:Y},{default:i(()=>[l("div",De,[A(n(e.$t("shop.upload"))+" ",1),Je])]),_:1},8,["modelValue"])]),l("div",null,[l("div",Pe,[l("div",je,n(e.$t("shop.shopAddress")),1),l("div",{class:"value flex-end gap-1",onClick:o[17]||(o[17]=t=>u(C)(!0))},[A(n(e.$t("shop.edit"))+" ",1),ze]),a(F,{round:"",show:u(k),"onUpdate:show":o[19]||(o[19]=t=>x(k)?k.value=t:null),position:"bottom",style:{height:"40%"}},{default:i(()=>[a(le,{title:"","area-list":u(X),"columns-placeholder":[e.$t("shop.pleaseSelect"),e.$t("shop.pleaseSelect"),e.$t("shop.pleaseSelect")],"columns-num":"2",onConfirm:D,onCancel:o[18]||(o[18]=t=>u(C)(!1))},null,8,["area-list","columns-placeholder"])]),_:1},8,["show"])]),a(y,{class:"rounded bg-[#f2f0ef] px-1 py-2 mt-2",readonly:"",modelValue:s.value.location,"onUpdate:modelValue":o[20]||(o[20]=t=>s.value.location=t),placeholder:e.$t("shop.pleaseSelect")},null,8,["modelValue","placeholder"])]),l("div",null,[l("div",Ge,[l("div",eo,n(e.$t("shop.shopSpecificAddress")),1)]),a(y,{class:"rounded bg-[#f2f0ef] px-1 py-2 mt-2",modelValue:s.value.contactAddress,"onUpdate:modelValue":o[21]||(o[21]=t=>s.value.contactAddress=t),placeholder:e.$t("shop.pleaseInput")},null,8,["modelValue","placeholder"])])]),a(te,{class:"btn-orange btn-shadow min-w-[130px] mt-2 block mx-auto",loading:_.value,onClick:j},{default:i(()=>[A(n(e.$t("common.confirm")),1)]),_:1},8,["loading"])])}}}),uo=se(oo,[["__scopeId","data-v-0906f736"],["__file","/Users/wangkeai/work/xueyan/mai/flashmall-dapp/src/view/shop/EditShopInfo.vue"]]);export{uo as default};
