import{_ as L,d as N,B as R,ae as $,a as p,m as P,o as z,E,e as k,g as l,G as x,H as B,h as r,t as v,K as w,k as h,j as u,b as i,p as F,l as G}from"./index-dd2b66f1.js";import{S as H,G as U,F as C}from"./GoodsList-346b3cc7.js";import{B as V}from"./BackIcon-54c2e114.js";import"./outline-4c6b317f.js";import"./mcoin-logo-601d180b.js";import"./RatioBox-f840ae09.js";import"./mall-3e218408.js";import"./mall-9e8f333c.js";import"./cart-188dc918.js";const q=""+new URL("../images/search-126df2a0.svg",import.meta.url).href;const K=c=>(F("data-v-5d9e4984"),c=c(),G(),c),j={class:"px-3 top-0 right-0 left-0 bg-gray1 min-h-screen absolute z-50 h-full overflow-y-auto safe-bottom-page"},D={class:"sticky top-0 z-50 bg-gray1"},M={class:"flex-center-bw gap-1 pt-3"},A={key:0,class:"border border-solid rounded-lg px-2 py-0.5 text-xs text-primary"},J=K(()=>l("img",{src:q,class:"w-5 h-5"},null,-1)),O=[J],Q={class:"mt-4 flex-center-bw mb-3"},W={class:"flex items-center gap-x-6"},X=N({setup(c){const m=R(),_=$(),o=p(0),f=p(),n=p(null),d=p(null),e=P({keyword:"",sortType:1,orderBy:1,classId:null}),S=s=>{o.value===0?(s.saleStatus?(e.sortType=1,e.orderBy=s.saleStatus===1?2:1):s.starStatus?(e.sortType=2,e.orderBy=s.starStatus===1?2:1):(e.sortType=null,e.orderBy=null),n.value.handleSearch()):(s.saleStatus?(e.sortType=1,e.orderBy=s.saleStatus===1?2:1):s.priceStatus?(e.sortType=2,e.orderBy=s.priceStatus===1?2:1):(e.sortType=null,e.orderBy=null),d.value.handleSearch())},g=s=>{o.value=s,o.value===0?n.value&&n.value.handleSearch(e):d.value&&d.value.handleSearch(e)},T=s=>{s.code==="Enter"&&(o.value===0?n.value.handleSearch(e):d.value.handleSearch(e))},b=()=>{o.value===0?n.value.handleSearch(e):d.value.handleSearch(e)};return z(()=>{e.classId=_.query.classId||null,f.value=_.query.className||null}),(s,t)=>{const I=E("van-field");return i(),k("div",j,[l("section",D,[l("section",M,[x(V),x(I,{"model-value":r(e).keyword,"onUpdate:model-value":t[0]||(t[0]=a=>r(e).keyword=a),clearable:"",class:"rounded-3xl flex-1",onKeypress:T},{"left-icon":B(()=>[f.value?(i(),k("view",A,v(f.value),1)):u("v-if",!0)]),"right-icon":B(()=>[l("div",{onClick:b},O)]),_:1},8,["model-value"]),l("div",{onClick:t[1]||(t[1]=a=>r(m).go(-1))},v(s.$t("common.cancel")),1)]),l("section",Q,[l("div",W,[l("div",{class:w(["text-sm text-default rounded-3xl",{active:o.value===0}]),onClick:t[2]||(t[2]=a=>g(0))},v(s.$t("mall.shopName")),3),l("div",{class:w(["text-sm text-default rounded-3xl",{active:o.value===1}]),onClick:t[3]||(t[3]=a=>g(1))},v(s.$t("mall.goodsName")),3)]),o.value===0?(i(),h(C,{key:0,searchTypes:"shop",onChange:S})):u("v-if",!0),o.value===1?(i(),h(C,{key:1,searchTypes:"goods",onChange:S})):u("v-if",!0)])]),o.value===0?(i(),h(H,{key:0,searchParam:r(e),ref:(a,y)=>{y.shopListRef=a,n.value=a},onHandleTo:t[4]||(t[4]=a=>r(m).push(a))},null,8,["searchParam"])):u("v-if",!0),o.value===1?(i(),h(U,{key:1,searchParam:r(e),ref:(a,y)=>{y.goodListRef=a,d.value=a},onHandleTo:t[5]||(t[5]=a=>r(m).push(a))},null,8,["searchParam"])):u("v-if",!0)])}}}),ne=L(X,[["__scopeId","data-v-5d9e4984"],["__file","/Users/wangkeai/work/xueyan/mai/flashmall-dapp/src/view/search/Search.vue"]]);export{ne as default};
